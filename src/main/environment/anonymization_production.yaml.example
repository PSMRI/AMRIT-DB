# AMRIT DB Anonymization Configuration - Production to UAT
# CRITICAL: Only use read replicas for source, NEVER primary database
# Copy to anonymization_production.yaml and update with production details

source:
  host: db-replica.prod.example.com
  port: 3306
  schemas:
    - db_iemr
    - db_identity
    - db_reporting
    - db_1097_identity
  username: readonly_user
  password: ${DB_PROD_READ_PASSWORD}
  readOnly: true
  connectionTimeout: 30000

target:
  host: uat-db.example.com
  port: 3306
  schemas:
    - db_iemr
    - db_identity
    - db_reporting
    - db_1097_identity
  username: uat_admin
  password: ${DB_UAT_WRITE_PASSWORD}
  connectionTimeout: 30000

safety:
  enabled: true
  allowedHosts:
    - db-replica.prod.example.com
    - db-replica-1.prod.example.com
    - db-replica-2.prod.example.com
  deniedPatterns:
    - "*primary*"
    - "*master*"
    - "*prod-db*"
  requireExplicitApproval: true
  approvalFlag: PROD_TO_UAT_2025_Q1  # Rotate monthly

performance:
  batchSize: 1000
  fetchSize: 1000
  maxMemoryMb: 1024

rulesFile: rules.yaml
loggingPath: /var/log/amrit-anonymization

# Security Notes:
# 1. Always use read replicas for source
# 2. Store passwords in environment variables
# 3. Rotate approval flag monthly
# 4. Test with --dry-run first
# 5. Review run-report.json after completion
