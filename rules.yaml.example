# AMRIT DB Anonymization Rules v2.0
# Defines anonymization strategies for all 4 AMRIT schemas
 
rulesVersion: "2.0.0"
schemaHint: "AMRIT-multi-schema-2025-Q1"
unknownColumnPolicy: WARN  # FAIL, WARN, or PRESERVE

databases:
  # Schema 1: Identity Database
  db_identity:
    tables:
      m_beneficiaryregidmapping:
        primaryKey: BenRegID
        columns:
          BenRegID:
            strategy: HMAC_HASH
          FirstName:
            strategy: HMAC_HASH
          LastName:
            strategy: HMAC_HASH
          PhoneNo:
            strategy: HMAC_HASH
          Email:
            strategy: HMAC_HASH
          DOB:
            strategy: HMAC_HASH
          GenderID:
            strategy: PRESERVE
  
  # Schema 2: IEMR Database
  db_iemr:
    tables:
      t_benvisitdetail:
        primaryKey: BenVisitID
        columns:
          BenVisitID:
            strategy: PRESERVE
          BeneficiaryRegID:
            strategy: HMAC_HASH
          VisitDateTime:
            strategy: PRESERVE
      
      m_user:
        primaryKey: UserID
        columns:
          UserID:
            strategy: PRESERVE
          FirstName:
            strategy: HMAC_HASH
          LastName:
            strategy: HMAC_HASH
          UserName:
            strategy: HMAC_HASH
          EmailID:
            strategy: HMAC_HASH
  
  # Schema 3: Reporting Database
  db_reporting:
    tables:
      fact_bencall:
        primaryKey: Fact_BenCallID
        columns:
          Fact_BenCallID:
            strategy: PRESERVE
          BeneficiaryRegID:
            strategy: HMAC_HASH
          CallDateTime:
            strategy: PRESERVE
  
  # Schema 4: 1097 Identity Database
  db_1097_identity:
    tables:
      m_beneficiaryregidmapping:
        primaryKey: BenRegId
        columns:
          BenRegId:
            strategy: PRESERVE
          HealthID:
            strategy: HMAC_HASH
          HealthIDNumber:
            strategy: HMAC_HASH
          FirstName:
            strategy: HMAC_HASH
          LastName:
            strategy: HMAC_HASH

# Available strategies:
# - PRESERVE: Keep original value unchanged
# - HMAC_HASH: Deterministic HMAC-SHA256 hash (same input â†’ same output)
